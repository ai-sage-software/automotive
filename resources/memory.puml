@startuml
!theme mars

title Technical Implementation of 5 RAG Memory Types

package "Retrieval-Augmented Generation (RAG) System" {

  component "Large Language Model (LLM)" as LLM

  package "Memory Management System" {

    rectangle "Memory Types" {

      package "1. Short-Term / Working Memory" as ShortTerm {
        artifact "LLM Context Window" as LLM_Context
        note top of LLM_Context: User Query, Recent Turns,\nIntermediate Thoughts
        database "Ephemeral Cache (Redis, in-memory)" as EphemeralCache
      }

      package "2. Long-Term / Semantic Memory" as LongTerm {
        database "Vector Database (Pinecone, Weaviate, Chroma)" as VectorDB
        database "Relational Database (PostgreSQL, MySQL)" as RelationalDB
        database "Node/Graph Database (Neo4j, ArangoDB)" as GraphDB
        note bottom of VectorDB: Embeddings of Text Chunks
        note bottom of RelationalDB: Structured Data, Metadata
        note bottom of GraphDB: Relationships between Entities
      }

      package "3. Episodic / Interaction Memory" as Episodic {
        database "Document Database (MongoDB, DynamoDB)" as DocumentDB
        database "Time-Series Database (InfluxDB)" as TimeSeriesDB
        database "Relational Database (PostgreSQL)" as EpisodicRelational
        note bottom of DocumentDB: User Sessions, Feedback Logs, Interaction History
        note bottom of TimeSeriesDB: Event Timestamps, Usage Metrics
      }

      package "4. Procedural / Agentic Memory" as Procedural {
        database "Relational Database (PostgreSQL, SQLite)" as RuleDB
        database "NoSQL Key-Value Store (Redis, DynamoDB)" as AgentStateKV
        database "Code Repository/Function Registry" as CodeRepo
        note bottom of RuleDB: Agent Rules, Workflow Definitions
        note bottom of AgentStateKV: Current Agent State, Scratchpad
      }

      package "5. Reference / Citation Memory" as Reference {
        database "Relational Database (PostgreSQL)" as SourceMetaDB
        database "API Endpoints/External Services" as ExternalAPIs
        note bottom of SourceMetaDB: Source URLs, Authors, Publication Dates, Verification Status
      }
    }
  }

  LLM -- ShortTerm : Uses current context
  ShortTerm -- EphemeralCache : Stores temporary info
  LLM -- LongTerm : Queries for facts
  LLM -- Episodic : Learns from history
  LLM -- Procedural : Executes actions/rules
  LLM -- Reference : Verifies information

}
@enduml