---
openapi: "3.0.1"
info:
  title: "Domain API Specification"
  description: "API generated from DSL domain ontology."
  version: "1.0.0"
components:
  links:

    # ==========================================================
    # 1. Base Resource Link Definitions
    # These are used to point to the resource itself or its parent/children.
    # ==========================================================

    Self:
      description: |
        A link to the resource being returned. This is essential for HATEOAS, 
        allowing the client to always know the canonical URL for the item.
      operationId: get${resourceName}ById
      parameters:
        # Assumes the operation ID uses a parameter named 'recordId' or equivalent.
        # This expression tells the parser to use the 'id' field from the response body
        # as the value for the 'recordId' path parameter in the target operation.
        recordId: '$response.body#/id'
      server:
        $ref: '#/server' # Placeholder to use the API's base server configuration

    ParentPersonnelRecord:
      description: A link to the parent Personnel Record resource.
      operationId: getPersonnelRecordById
      parameters:
        # Assumes the current response body contains a field named 'employeeId'
        # which is the identifier for the parent Personnel Record.
        recordId: '$response.body#/employeeId'
      server:
        $ref: '#/server'

    # ==========================================================
    # 2. Related Collection Links
    # These link to collections of related sub-resources.
    # ==========================================================

    RelatedBenefitPlans:
      description: A link to the collection of benefit plans for the current employee.
      operationId: listBenefitPlans
      parameters:
        # Retrieves the necessary parent key from the current response body.
        recordId: '$response.body#/id'
      server:
        $ref: '#/server'

    RelatedTimeOffEvents:
      description: A link to the collection of time off events associated with this record.
      operationId: listTimeOffEvents
      parameters:
        recordId: '$response.body#/id'
      server:
        $ref: '#/server'

    # ==========================================================
    # 3. Action Links
    # Links to operations that are not simple GETs, often tied to state.
    # ==========================================================

    StartBenefitEnrollment:
      description: A link to initiate the enrollment process for a new benefit plan.
      operationId: createBenefitPlan
      parameters:
        recordId: '$response.body#/id'
      server:
        $ref: '#/server'

    CancelTimeOffEvent:
      description: A link to delete (cancel) a specific Time Off Event.
      operationId: deleteTimeOffEventRecord
      parameters:
        recordId: '$response.body#/recordId'
        # Assumes the Time Off Event ID is available in the current response.
        eventId: '$response.body#/eventId'
      server:
        $ref: '#/server'